# 业务错误码设计文档

## 错误码规范
- 标准HTTP状态码用于通用场景
- 业务错误码格式: `XXXZZZ`
    - `XXX`: 业务模块编号
        - `10`: 用户服务
        - `20`: 内容服务
            - `201`: 评论服务
            - `202`: 标签服务
        - `30`: 媒体服务
            - `301`: 文件验证
            - `302`: 文件操作
    - `ZZZ`: 具体错误序号(001-999)

## 通用错误码

### HTTP 标准状态码
| 错误码 | 错误信息 | 说明 |
|--------|----------|------|
| `200` | 操作成功 | 请求成功处理 |
| `400` | 请求参数错误 | 参数缺失、格式错误或不合法 |
| `401` | 需要登录后操作 | 未登录或登录已过期 |
| `403` | 无权限操作 | 已登录但无权限访问资源 |
| `404` | 资源不存在 | 请求的资源未找到 |
| `500` | 服务器开小差了,请稍后再试吧 | 系统内部错误 |

---

## 用户服务 (10xxxx)

### 登录认证 (101xxx)
| 错误码 | 错误信息 | 说明 |
|--------|----------|------|
| `101001` | 用户名或密码错误 | 登录验证失败 |
| `101002` | 用户不存在 | 查询不到该用户 |
| `101003` | 用户已被禁用 | 账号被管理员禁用 |
| `101004` | 邮箱或用户名已被注册 | 注册时邮箱或用户名重复 |
| `101007` | 两次输入的密码不一致 | 密码确认不匹配 |
| `101008` | 新密码不能与旧密码相同 | 修改密码时新旧密码相同 |
| `101009` | 生成预签名URL失败 | 用户头像/背景图预签名URL生成失败 |

---

## 内容服务 (20xxxx)

### 评论服务 (201xxx)
| 错误码 | 错误信息 | 说明 |
|--------|----------|------|
| `201001` | 评论不存在 | 查询的评论不存在或已删除 |
| `201002` | 评论添加成功 | 评论创建成功 |
| `201003` | 父评论不存在 | 回复的父评论不存在 |
| `201004` | 不支持的操作类型 | 操作类型参数错误 |

### 标签服务 (202xxx)
| 错误码 | 错误信息 | 说明 |
|--------|----------|------|
| `202001` | 标签名称已存在 | 添加或更新标签时名称重复 |
| `202002` | 无效的标签 | 标签ID不存在或已删除 |

---

## 媒体服务 (30xxxx)

### 文件验证 (301xxx)
| 错误码 | 错误信息 | 说明 |
|--------|----------|------|
| `301001` | 文件不能为空 | 上传的文件对象为空 |
| `301002` | 文件大小超出限制 | 文件超过允许的最大大小 |
| `301003` | 无法识别文件类型 | 无法通过内容检测文件MIME类型 |
| `301004` | 不支持的文件类型 | 文件类型不在支持列表中 |
| `301005` | 文件扩展名与实际类型不匹配 | 文件扩展名与内容检测类型不一致 |

### 文件操作 (302xxx)
| 错误码 | 错误信息 | 说明 |
|--------|----------|------|
| `302001` | 对象名称不能为空 | 存储对象名称参数为空 |
| `302002` | 输入流不能为空 | 文件输入流为空 |
| `302003` | 存储桶名称不能为空 | Bucket名称参数为空 |
| `302004` | 过期时间无效 | 预签名URL过期时间设置无效 |
| `302005` | 文件上传失败 | 文件上传到对象存储失败 |
| `302006` | 生成预签名URL失败 | 生成OSS预签名URL失败 |

**文档版本**: v1.0  
**最后更新**: 2025年11月22日  

    